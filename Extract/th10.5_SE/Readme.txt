プログラム名：th105_SuperExtracter

用途：緋想天で使われているdatファイルから直に一般形式へ変換する

使い方：
展開したいdatをth105_SE.exeにドラッグ＆ドロップで使えます。
一応コマンドライン経由でも

ファイル解説：
th105_SE.exe		プログラム本体
cvn_convert.exe		おまけ、cv0〜3と一般形式を相互変換します。
			ドラッグ＆ドロップでcv0←→txt、cv1←→csv、cv2→png、cv3←→wavに変換します。
			png→cv2ができないのは仕様です。
pal_extract.exe		th105c.datなどpalファイルが含まれていないdat展開時に利用するサブプログラム
			一応、単体でもdatファイルをドラッグ&ドロップでpalファイルのみ展開することができます。
src/mt.c			利用させてもらっている人様のコード、きちんとライセンスされているので再利用の際はソース冒頭を読むべし
src/th105_SE.c		プログラムのソース、ウイルスを疑う人用
src/th105_lib.c		同上
src/th105_lib.h		同上
src/th105_png.c		同上
src/cvn_convert.c	同上
src/pal_extract.c	同上
Readme.txt		今読んでいるこれ
History.txt		更新履歴

免責事項：
これに同梱されたプログラムその他が原因で発生したいかなる損害も当方は一切関知しません
自己責任でお使いください。

Q&A：
	Q：なんか一瞬だけ黒窓出て終了するんだけど
	A：ダブルクリックでは使えません、コマンドラインから使うか展開したいdatをドラッグ＆ドロップしてください

	Q：黒窓の表示おかしくない？
	A：パスが長すぎて1行80字を超えると酷く表示が崩れます、出力内容には影響ないので無視してください。

	Q：緋想天以外のdatは？
	A：中の人が緋想天以外のdatフォーマットを知らないのでできません、資料があったら追加するかも

	Q：PNGの割りにファイルサイズでかくね？
	A：pngは独自実装に付き、出力は無圧縮pngになっております。

	Q：palとpatとdatがまだ一般形式にされず残ってるけど？
	A：それらは該当する一般形式ファイルが存在しないため未変換です。

	Q：変な画像が出力されてるんだけど
	A：パレットデータ(1Pカラー)が読み込めなかったと思われます。
	先に他のdatを展開してpalファイルを取り出しておく、他datを同じフォルダにおいておくなどしてください。

	Q：残り時間表示いい加減だね
	A：全力で手抜きです、あくまで目安ということで。

	Q：これだけはしちゃいけないって禁止事項は？
	A：処理中に対象ファイルの編集、もしくは占有。

	Q：すごく重いんだけど
	A：仕様です

	Q：ウィンドウ出ないと使いづらいんだけど
	A：仕様です

	Q：dat展開も一般形式変換も既にあったような
	A：直に一般形式になるあたりが新しいと自負しています。

	Q：てんこあいしてる？
	A：いや別に

	Q：ｼｬﾝﾊｰｲ?
	A：ｼｬﾝﾊｰｲ!


作者：名無し
著作権など：
めんどうなので全放棄、再配布でも何でもお好きにどうぞ
ただしmt.cのみ別作者のコードなので、含める場合はソース冒頭に記載されたライセンスを読んだ上で行ってください。


技術情報(と、どうでもいい話)：
pngの独自実装はやっちゃった感があるが、それでも動いているのだから気にしない。
th105_png.cのcv2_flag=0で右端のゴミを出力可能、元データをきっちり見たい人向け
速度的にまだ最適化できる部分は残っているが、手元の環境ではHDD読み書きの速度で頭打ちなのでこのまま。
includeで.cファイルを読み込んでいるのは分割コンパイルの手間を省くため、非推奨なのはわかっていてもやめられない。
gotoも使っているが、こちらは分をわきまえているので問題ないはず。
th105_png.cを使いまわすためにload_palの定義がおかしな場所にある。
datとcv0〜3のフォーマットは解析情報とかなりの推測で成り立っています
cv2はパレッドの切捨て部分を計算していません(格納値0xF8を0xFFとすべきだろうが0xF8のまま使用)
cv3はあからさまにwaveフォーマットなんだけど、最後のほうに意味不明なバイナリがくっついている、これはゴミなのか緋想天内で使うデータなのか・・・
グローバル変数多目です、クラス化すればなくせるレベルですが面倒なのでC++にはなおしていません。
エラーチェックはきっちりしているようで肝心な場所が抜けています、palファイルなしで真っ白画像も既知なのに直っていない。
cvn_convertはpng→cv2だけ未対応、他は対応形式であれば相互変換できるはず、出力位置が使い辛いのはオマケということで許して。
SuperEXtracterで略そうとして危険な名前になりかけたのは秘密。
palファイルがない場合、既にdataいかにファイルが存在するならそこから読み込む、なければ読込指定されたdatと同じ階層のdatから読み込む
コンパイル環境はコマンドライン版VC++14.00.50727.762、CodeGear付属のBCC32でも動作することを確認しています。
